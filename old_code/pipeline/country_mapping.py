#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Dec 12 10:14:32 2018

@author: maayanlab
"""
from iso3166 import countries

def convert_countries(df):
    
    converted_countries = []
    for country in df['country']:
        try:
            converted_countries.append(countries.get(country).name)
        except:
            converted_countries.append(country)
            
    convert_dict_1= {
            'uk':'United Kingdom',
            'republic of korea':'South Korea',
            'rep of korea':'South Korea',
            'the republic of korea':'South Korea',
            'south korea':'South Korea',
            'republic of china':'Taiwan',
            'Taiwan, Province of China':'Taiwan',
            'roc':'Taiwan',
            'roc (republic of china)':'Taiwan',
            'czech republic':'The Czech Republic',
            'the czech republic':'The Czech Republic',
            'south australia':'Australia',
            'kings college london': 'United Kingdom',
            'china agricultural university': 'China',
            'the netherlands': 'The Netherlands',
            'pr china':'China',
            'p r china':'China',
            'pr of china':'China',
            'prchina':'China',
            'peoples republic of china':'China',
            'on':'Canada',
            'berlin':'Germany',
            'russia':'Russia',
            'auckland university':'New Zealand',
            'universitat de vic':'Spain',
            'imperial college':'United Kingdom',
            'ulsan':'South Korea',
            'hong kong sar':'China',
            'hong kong':'China',
            'Hong Kong':'China',
            'Macao':'China',
            'macau':'China',
            'delft':'The Netherlands',
            'kingdom of saudi arabia':'Saudi Arabia',
            'méxico':'Mexico',
            'seoul':'South Korea',
            'korea':'Korea',
            'iran':'Iran',
            'münster':'Germany',
            'weill cornell medical college':'United States of America',
            'midlothian':'United Kingdom',
            'united kingdom':'United Kingdom',
            'doha qatar':'Qatar',
            'cep':'Brazil',
            'subcellular structure and cellular dynamics':'France',
            'denmark and princess al jawha':'Denmark',
            'republic of singapore':'Singapore',
            'il usa':'United States of America',
            'united states':'United States of America',
            'malawia':'Malawia',
            'inp':'France',
            'cardif':'United Kingdom',
            'brasil':'Brazil',
            'chin':'China',
            'gif sur yvette': 'France',
            'barcelona':'Spain',
            'london':'United Kingdom',
            'jena':'Germany',
            'oslo n':'Norway',
            'catania':'Italy',
            'Russian Federation':'Russia',
            'salzburg':'Austria',
            'beijing':'China',
            'campinas':'Brazil',
            'ma usa':'United States of America',
            'neuherberg':'Germany',
            'leipzig':'Germany',
            'Netherlands':'The Netherlands',
            'uae':'United Arab Emirates',
            'pernambuco':'Brazil',
            'nairobi':'Kenya',
            'illkirch':'France',
            'taipei':'Taiwan',
            'china and t':'China',
            'delhi':'India',
            'nas of ukraine':'Ukraine',
            'istanbul':'Turkey',
            'morelos':'Mexico',
            'groningen':'The Netherlands',
            'dresden':'Germany',
            'vietnam':'Vietnam',
            'Czechia':'The Czech Republic',
            'Palestine, State of':'Palestine'
            
    }
    converted_countries2 = [convert_dict_1[country] if country in convert_dict_1.keys() else country for country in converted_countries]    
    
    convert_dict_2={    
            
        'https://doi.org/10.1093/bioinformatics/btx771':'United States of America',        
        'https://doi.org/10.1093/bioinformatics/btv168':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv407':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw106':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx087':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx334':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv158':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv178':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btv150':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv272':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btv291':'Italy',
        'https://doi.org/10.1093/bioinformatics/btv287':'Germany', 
        'https://doi.org/10.1093/bioinformatics/btv286':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btv300':'Spain',
        'https://doi.org/10.1093/bioinformatics/btv281':'Brazil',   
        'https://doi.org/10.1093/bioinformatics/btv278':'Spain',
        'https://doi.org/10.1093/bioinformatics/btv356':'Australia',
        'https://doi.org/10.1093/bioinformatics/btv352': 'India',
        'https://doi.org/10.1093/bioinformatics/btv383':'Australia',
        'https://doi.org/10.1093/bioinformatics/btv382':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv403':'France',
        'https://doi.org/10.1093/bioinformatics/btv421':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btv473':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btv478':'United States of America',
        'https://doi.org/10.1093/nar/gkp440':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv499':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv500':'China',
        'https://doi.org/10.1093/bioinformatics/btu741':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw287':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv670':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw044':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw091':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw093':'Singapore',
        'https://doi.org/10.1093/bioinformatics/btw201':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btw220':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btw161':'Germany',
        'https://doi.org/10.1093/bioinformatics/btw182':'China',
        'https://doi.org/10.1093/bioinformatics/btw239':'Australia',
        'https://doi.org/10.1093/bioinformatics/btw301':'Greece',
        'https://doi.org/10.1093/bioinformatics/btw318':'United States of America',        
        'https://doi.org/10.1093/bioinformatics/btw405':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btw419':'Taiwan',
        'https://doi.org/10.1093/bioinformatics/btw496':'China', #hong kong
        'https://doi.org/10.1093/bioinformatics/btw523':'United States of America',  
        'https://doi.org/10.1093/bioinformatics/btx183':'United States of America',  
        'https://doi.org/10.1093/bioinformatics/btv554':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btv620':'Germany',
        'https://doi.org/10.1093/bioinformatics/btv647':'Austria',
        'https://doi.org/10.1093/bioinformatics/btv652':'Sweden',
        'https://doi.org/10.1093/bioinformatics/btw004':'United States of America',       
        'https://doi.org/10.1093/bioinformatics/btw008':'Ireland',
        'https://doi.org/10.1093/bioinformatics/btx104':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx087':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx101':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx099':'Germany',
        'https://doi.org/10.1093/bioinformatics/btx191':'United States of America',      
        'https://doi.org/10.1093/bioinformatics/btw740':'United States of America',          
        'https://doi.org/10.1093/bioinformatics/btx565':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx184':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx185':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx223':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx197':'Germany',
        'https://doi.org/10.1093/bioinformatics/btx273':'Switzerland',
        'https://doi.org/10.1093/bioinformatics/btx299':'Australia',   
        'https://doi.org/10.1093/bioinformatics/btx263':'Austria',
        'https://doi.org/10.1093/bioinformatics/btx286':'Israel',
        'https://doi.org/10.1093/bioinformatics/btx317':'China',
        'https://doi.org/10.1093/bioinformatics/btx401':'China',
        'https://doi.org/10.1093/bioinformatics/btx297':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx316':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx361':'Spain',
        'https://doi.org/10.1093/bioinformatics/btx385':'Germany',
        'https://doi.org/10.1093/bioinformatics/btx362':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx507':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx376':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btw536':'Canada', 
        'https://doi.org/10.1093/bioinformatics/btx216':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx655':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx368':'Germany',
        'https://doi.org/10.1093/bioinformatics/btx505':'China',#hong kong
        'https://doi.org/10.1093/bioinformatics/btx473':'China',
        'https://doi.org/10.1093/bioinformatics/btx472':'China',
        'https://doi.org/10.1093/bioinformatics/btx443':'Taiwan',
        'https://doi.org/10.1093/bioinformatics/btx518':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx534':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btx391':'Belgium',
        'https://doi.org/10.1093/bioinformatics/btx501':'Sweden',
        'https://doi.org/10.1093/bioinformatics/btx506':'Spain',
        'https://doi.org/10.1093/bioinformatics/btx499':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw568':'Iceland',
        'https://doi.org/10.1093/bioinformatics/btw612':'South Korea', # Republic of Korea
        'https://doi.org/10.1093/bioinformatics/btw606':'United States of America', 
        'https://doi.org/10.1093/bioinformatics/btw674':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw789':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw677':'Spain',
        'https://doi.org/10.1093/bioinformatics/btw647':'Israel',
        'https://doi.org/10.1093/bioinformatics/bty003':'China',
        'https://doi.org/10.1093/bioinformatics/btx699':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw698':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw684':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw688':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw726':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw682':'Germany',
        'https://doi.org/10.1093/bioinformatics/btw708':'France',
        'https://doi.org/10.1093/bioinformatics/btw711':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw754':'France',
        'https://doi.org/10.1093/bioinformatics/btw759':'Germany', # from email domain .de
        'https://doi.org/10.1093/bioinformatics/btw752':'France',
        'https://doi.org/10.1093/bioinformatics/btw767':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw735':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw772':'Iran',
        'https://doi.org/10.1093/bioinformatics/btw746':'Poland',
        'https://doi.org/10.1093/bioinformatics/btw770':'China',
        'https://doi.org/10.1093/bioinformatics/btw821':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw790':'Germany',
        'https://doi.org/10.1093/bioinformatics/btw791':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw824':'Sweden',
        'https://doi.org/10.1093/bioinformatics/btw781':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw766':'The Netherlands',
        'https://doi.org/10.1093/bioinformatics/btw809':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw800':'France',
        'https://doi.org/10.1093/bioinformatics/btw801':'China',
        'https://doi.org/10.1093/bioinformatics/bty431':'South Korea',
        'https://doi.org/10.1093/bioinformatics/btx675':'Canada',
        'https://doi.org/10.1093/bioinformatics/btx561':'United States of America',
        'https://doi.org/10.1186/1471-2105-16-S18-S11':'Taiwan',
        'https://doi.org/10.1186/1471-2105-16-S17-S10':'United States of America',
        'https://doi.org/10.1186/1471-2105-16-S17-S2':'United States of America',
        'https://doi.org/10.1186/1471-2105-16-S13-S4':'United States of America',
        'https://doi.org/10.1186/1471-2105-16-S11-S3':'Germany',
        'https://doi.org/10.1186/1471-2105-16-S9-S7':'Italy',
        'https://doi.org/10.1186/1471-2105-16-S7-S10':'China', #Hong kong
        'https://doi.org/10.1186/1471-2105-16-S1-S3':'China',
        'https://doi.org/10.1186/1471-2105-16-S1-S8':'Taiwan',
        'https://doi.org/10.1186/1471-2105-16-S1-S9':'Taiwan',
        'https://doi.org/10.1186/1471-2105-15-S15-S5':'South Korea',
        'https://doi.org/10.1186/1471-2105-15-S12-S1':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-344':'Switzerland',
        'https://doi.org/10.1186/1471-2105-15-S11-S15':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-343':'Germany',
        'https://doi.org/10.1186/1471-2105-15-311':'China',
        'https://doi.org/10.1186/1471-2105-15-S9-S6':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-S9-S2':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-S9-S12':'Iran',
        'https://doi.org/10.1186/1471-2105-15-S9-S15':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-298':'China',
        'https://doi.org/10.1186/1471-2105-15-293':'France',
        'https://doi.org/10.1186/1471-2105-15-262':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-S8-S3':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-173':'Taiwan',
        'https://doi.org/10.1186/1471-2105-15-S7-S12':'United States of America',
        'https://doi.org/10.1186/1471-2105-15-158':'Australia',
        'https://doi.org/10.1186/1471-2105-15-136':'United Kingdom',
        'https://doi.org/10.1186/1471-2105-15-81':'Denmark',
        'https://doi.org/10.1186/1471-2105-15-S1-S13':'Italy',
        'https://doi.org/10.1186/1471-2105-15-S1-S11':'United Kingdom',
        'https://doi.org/10.1186/1471-2105-15-S1-S5':'Spain',
        'https://doi.org/10.1186/1471-2105-15-S1-S8':'Italy',
        'https://doi.org/10.1186/1471-2105-14-S16-S14':'Australia',
        'https://doi.org/10.1186/1471-2105-14-S16-S12':'Taiwan',
        'https://doi.org/10.1186/1471-2105-14-S16-S10':'Taiwan',
        'https://doi.org/10.1186/1471-2105-14-S16-S13':'Thailand',
        'https://doi.org/10.1186/1471-2105-14-S16-S4':'Singapore',
        'https://doi.org/10.1186/1471-2105-14-S14-S9':'India',
        'https://doi.org/10.1186/1471-2105-14-S14-S12':'United States of America',
        'https://doi.org/10.1186/1471-2105-14-S14-S17':'United States of America',
        'https://doi.org/10.1186/1471-2105-14-S13-S9':'United States of America',
        'https://doi.org/10.1093/nar/gkp1018':'United States of America',
        'https://doi.org/10.1093/nar/gkr1028':'United States of America',
        'https://doi.org/10.1093/nar/gku1172':'United States of America',
        'https://doi.org/10.1093/nar/gku991':'United Kingdom',
        'https://doi.org/10.1093/nar/gku989':'United Kingdom',
        'https://doi.org/10.1093/nar/gkw1060':'China',
        'https://doi.org/10.1093/nar/gkw1008':'United Kingdom',
        'https://doi.org/10.1093/nar/gkw1099':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw829':'Australia',
        'https://doi.org/10.1093/bioinformatics/btw798':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw805':'Australia',
        'https://doi.org/10.1093/bioinformatics/btw733':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btw814':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx829':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx813':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty027':'Israel',
        'https://doi.org/10.1093/bioinformatics/bty037':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty058':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty044':'China',
        'https://doi.org/10.1093/bioinformatics/bty065':'France',
        'https://doi.org/10.1093/bioinformatics/btx844':'France',
        'https://doi.org/10.1093/bioinformatics/bty128':'Germany',
        'https://doi.org/10.1093/bioinformatics/bty097':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty130':'China',
        'https://doi.org/10.1093/bioinformatics/bty127':'Switzerland',
        'https://doi.org/10.1093/bioinformatics/bty146':'Spain',
        'https://doi.org/10.1093/bioinformatics/bty122':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty124':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty421':'China',
        'https://doi.org/10.1093/bioinformatics/bty444':'China',
        'https://doi.org/10.1093/bioinformatics/bty430':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx551':'Belgium',
        'https://doi.org/10.1093/bioinformatics/btx602':'Switzerland',
        'https://doi.org/10.1093/bioinformatics/btx644':'France',
        'https://doi.org/10.1093/bioinformatics/btx670':'Australia',
        'https://doi.org/10.1093/bioinformatics/btx673':'Spain',
        'https://doi.org/10.1093/bioinformatics/btx646':'China',
        'https://doi.org/10.1093/bioinformatics/btx710':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx700':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx707':'Canada',
        'https://doi.org/10.1093/bioinformatics/btx705':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btx661':'Australia',
        'https://doi.org/10.1093/bioinformatics/btx771':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx743':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx719':'South Korea',
        'https://doi.org/10.1093/bioinformatics/btx776':'Germany',
        'https://doi.org/10.1093/bioinformatics/btx787':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx831':'Russia',
        'https://doi.org/10.1093/bioinformatics/btx657':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx824':'China',
        'https://doi.org/10.1093/database/bav052':'South Korea',
        'https://doi.org/10.1186/1471-2105-9-371':'United States of America',
        'https://doi.org/10.1186/s12859-014-0426-7':'United States of America',
        'https://doi.org/10.1186/1471-2105-13-200':'Austria',
        'https://doi.org/10.1186/1471-2105-11-563':'Canada',
        'https://doi.org/10.1093/database/bar025':'France',
        'https://doi.org/10.1093/database/bau083':'Germany',
        'https://doi.org/10.1093/database/bau061':'United States of America',
        'https://doi.org/10.1093/database/bav036':'Pakistan',
        'https://doi.org/10.1093/database/bav043':'United Kingdom',
        'https://doi.org/10.1093/database/bav080':'France',
        'https://doi.org/10.1093/database/bav085':'Saudi Arabia',
        'https://doi.org/10.1093/database/bav083':'China',
        'https://doi.org/10.1093/database/baw151':'Taiwan',
        'https://doi.org/10.1093/database/baw012':'India',
        'https://doi.org/10.1093/database/baw021':'Australia',
        'https://doi.org/10.1093/database/baw040':'United States of America',
        'https://doi.org/10.1093/database/baw062':'United States of America',
        'https://doi.org/10.1093/database/baw098':'Switzerland',
        'https://doi.org/10.1093/database/baw104':'India',
        'https://doi.org/10.1093/database/baw147':'Canada',
        'https://doi.org/10.1093/database/bax009':'United States of America',
        'https://doi.org/10.1093/database/bax033':'Brazil',
        'https://doi.org/10.1093/database/bax066':'India',
        'https://doi.org/10.1093/database/baw154':'United States of America',
        'https://doi.org/10.1093/database/bax058':'United States of America',
        'https://doi.org/10.1093/nar/gkn321':'France',
        'https://doi.org/10.1093/nar/gkp292':'Greece',
        'https://doi.org/10.1093/nar/gkp983':'Italy',
        'https://doi.org/10.1093/nar/gkq441':'United Kingdom',
        'https://doi.org/10.1093/nar/gku323':'United States of America',
        'https://doi.org/10.1093/nar/gkt1127':'Spain',
        'https://doi.org/10.1093/nar/gkt960':'Belgium',
        'https://doi.org/10.1093/nar/gkt984':'Sweden',
        'https://doi.org/10.1093/nar/gkt1026':'Germany',
        'https://doi.org/10.1093/nar/gku318':'United States of America',
        'https://doi.org/10.1093/nar/gkx120':'Germany',
        'https://doi.org/10.1093/nar/gky375':'Brazil',
        'https://doi.org/10.1093/nar/gky419':'Argentina',
        'https://doi.org/10.1093/bioinformatics/btx357':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btx520':'Germany',
        'https://doi.org/10.1093/bioinformatics/btw600':'United States of America',
        'https://doi.org/10.1093/bioinformatics/btv568':'United Kingdom',
        'https://doi.org/10.1093/bioinformatics/btw581':'China',
        'https://doi.org/10.1093/bioinformatics/btw668':'China',
        'https://doi.org/10.1093/bioinformatics/bty189':'United Kingdom',
        'https://doi.org/10.1093/database/bax071':'United States of America',
        'https://doi.org/10.1093/database/bax089':'China',
        'https://doi.org/10.1093/database/bax095':'China',
        'https://doi.org/10.1093/database/baw138':'New Zealand',
        'https://doi.org/10.1093/database/bax094':'China',
        'https://doi.org/10.1093/database/bax097':'China',
        'https://doi.org/10.1093/database/bax098':'Malaysia',
        'https://doi.org/10.1093/database/bax089':'China',
        'https://doi.org/10.1093/database/bax095':'China',
        'https://doi.org/10.1093/database/baw138':'New Zealand',
        'https://doi.org/10.1093/database/bax094':'China',
        'https://doi.org/10.1093/database/bax097':'China',
        'https://doi.org/10.1093/database/bax098':'Malaysia',
        'https://doi.org/10.1093/database/bax089':'China',
        'https://doi.org/10.1093/database/bax095':'China',
        'https://doi.org/10.1093/bioinformatics/btp081':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bts593':'Canada',
        'https://doi.org/10.1093/bioinformatics/btu783':'The Netherlands',
        'https://doi.org/10.1093/database/baq014':'The Netherlands',
        'https://doi.org/10.1093/database/bav118':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty550':'Austria',
        'https://doi.org/10.1093/bioinformatics/bty536':'United States of America',
        'https://doi.org/10.1093/bioinformatics/bty583':'Spain',
        'https://doi.org/10.1093/nar/gky1028': 'Singapore'
    }
    
    converted_countries3 = [convert_dict_2[doi] if doi in convert_dict_2.keys() else converted_countries2[i] for i,doi in enumerate(df['doi'])] 
    
    # Korea --> South Korea if school/city is in South Korea 
    country_final = []
    south_korea_cities = ['Seoul','Daejeon','Cheongju Chungbuk','Daegu','Suwon','Gyeonggi-do','Chungcheongbuk-do','Cheongju','Hanyang University','Osong']
    for i, country in enumerate(converted_countries3):
        if country == 'Korea':
            if any(city in df['affiliation'].iloc[i] for city in south_korea_cities):
                country_final.append('South Korea')
            else:
                country_final.append(country)
        else:
            country_final.append(country)

    return(country_final)    
        






